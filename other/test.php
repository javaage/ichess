<?php
require '../header.php';
require '../common.php';


$list = array();

for($k=1;$k<=999;$k++){
	$var=sprintf("%03d", $k);
	$urlQueryIndex = "http://hq.sinajs.cn/list=sz399" . $var;

	//echo $urlQueryIndex . '<br>';

	$html = file_get_contents($urlQueryIndex);
	$html = str_replace("\"", "", $html);
	
	$shItems = explode(',', $html);

	$shCurrentPrice = $shItems[3];
	$shClosePrice = $shItems[2];
	$openPrice = $shItems[1];

	$names = explode('=', $shItems[0]);
	$names[1] = iconv('GB2312', 'utf-8//IGNORE', $names[1]);
	$code = substr($names[0], -8);

	//echo $shItems[1] . '<br>';

	if($shItems[1] > 400)
		$list[] = "sz399" . $var;
}

echo "http://hq.sinajs.cn/list=" . join($list,',');


//http://hq.sinajs.cn/list=sz399001,sz399002,sz399003,sz399004,sz399005,sz399006,sz399007,sz399008,sz399009,sz399010,sz399011,sz399012,sz399013,sz399015,sz399016,sz399017,sz399018,sz399100,sz399101,sz399102,sz399103,sz399106,sz399107,sz399108,sz399231,sz399232,sz399233,sz399234,sz399235,sz399236,sz399237,sz399238,sz399239,sz399240,sz399241,sz399242,sz399243,sz399244,sz399248,sz399249,sz399300,sz399303,sz399305,sz399306,sz399310,sz399311,sz399312,sz399313,sz399314,sz399315,sz399316,sz399317,sz399318,sz399319,sz399320,sz399321,sz399322,sz399324,sz399326,sz399328,sz399330,sz399332,sz399333,sz399335,sz399337,sz399339,sz399341,sz399344,sz399346,sz399348,sz399350,sz399351,sz399352,sz399353,sz399354,sz399355,sz399356,sz399357,sz399358,sz399359,sz399360,sz399361,sz399362,sz399363,sz399364,sz399365,sz399366,sz399367,sz399368,sz399369,sz399370,sz399371,sz399372,sz399373,sz399374,sz399375,sz399376,sz399377,sz399378,sz399379,sz399380,sz399381,sz399382,sz399383,sz399384,sz399385,sz399386,sz399387,sz399388,sz399389,sz399390,sz399391,sz399392,sz399393,sz399394,sz399395,sz399396,sz399397,sz399398,sz399399,sz399400,sz399401,sz399402,sz399403,sz399404,sz399405,sz399406,sz399407,sz399408,sz399409,sz399410,sz399411,sz399412,sz399415,sz399416,sz399417,sz399418,sz399419,sz399420,sz399422,sz399423,sz399427,sz399428,sz399429,sz399431,sz399432,sz399433,sz399434,sz399435,sz399436,sz399437,sz399438,sz399439,sz399440,sz399441,sz399550,sz399551,sz399552,sz399553,sz399554,sz399555,sz399556,sz399557,sz399602,sz399604,sz399606,sz399608,sz399610,sz399611,sz399612,sz399613,sz399614,sz399615,sz399616,sz399617,sz399618,sz399619,sz399620,sz399621,sz399622,sz399623,sz399624,sz399625,sz399626,sz399627,sz399628,sz399629,sz399630,sz399631,sz399632,sz399633,sz399634,sz399635,sz399636,sz399637,sz399638,sz399639,sz399640,sz399641,sz399642,sz399643,sz399644,sz399645,sz399646,sz399647,sz399648,sz399649,sz399650,sz399651,sz399652,sz399653,sz399654,sz399655,sz399656,sz399657,sz399658,sz399659,sz399660,sz399661,sz399662,sz399663,sz399664,sz399665,sz399666,sz399667,sz399668,sz399669,sz399670,sz399671,sz399672,sz399673,sz399674,sz399675,sz399676,sz399677,sz399678,sz399679,sz399680,sz399681,sz399682,sz399683,sz399684,sz399685,sz399686,sz399687,sz399688,sz399689,sz399690,sz399691,sz399692,sz399693,sz399694,sz399695,sz399696,sz399697,sz399698,sz399699,sz399701,sz399702,sz399703,sz399704,sz399705,sz399706,sz399707,sz399802,sz399803,sz399804,sz399805,sz399806,sz399807,sz399808,sz399809,sz399810,sz399811,sz399812,sz399813,sz399814,sz399817,sz399901,sz399903,sz399904,sz399905,sz399907,sz399908,sz399909,sz399910,sz399911,sz399912,sz399913,sz399914,sz399915,sz399916,sz399917,sz399918,sz399919,sz399920,sz399922,sz399925,sz399926,sz399927,sz399928,sz399929,sz399930,sz399931,sz399932,sz399933,sz399934,sz399935,sz399936,sz399937,sz399938,sz399939,sz399941,sz399942,sz399943,sz399944,sz399945,sz399946,sz399947,sz399948,sz399949,sz399950,sz399951,sz399952,sz399953,sz399954,sz399956,sz399957,sz399958,sz399959,sz399960,sz399961,sz399962,sz399963,sz399964,sz399965,sz399966,sz399967,sz399968,sz399969,sz399970,sz399971,sz399972,sz399973,sz399974,sz399975,sz399976,sz399977,sz399978,sz399979,sz399980,sz399982,sz399983,sz399986,sz399987,sz399989,sz399990,sz399991,sz399992,sz399993,sz399994,sz399995,sz399996,sz399997,sz399998